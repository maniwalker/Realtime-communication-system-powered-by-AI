<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>SmartBridge_WebApp_VideoTemplate</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="assets/css/Banner-Heading-Image.css">
    <link rel="stylesheet" href="assets/css/Navbar-Centered-Brand.css">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body style="background: rgb(29, 1, 37);">
    <nav class="navbar navbar-light navbar-expand-md py-3" style="background: rgb(54, 2, 68);">
        <div class="container">
            <div></div><a class="navbar-brand d-flex align-items-center" href="#"><span
                    class="bs-icon-sm bs-icon-rounded bs-icon-primary d-flex justify-content-center align-items-center me-2 bs-icon"><i
                        class="fas fa-flask"></i></span><span style="color: rgb(255, 255, 255); font-size: 28px; font-weight: bolder ;font-family: 'Times New Roman', Times, serif;">Real-Time Communication
                    System Powered By AI&nbsp;For Specially Abled</span></a>

            <div></div>
        </div>
    </nav>
    <section>
        <div class="d-flex flex-column justify-content-center align-items-center">
            <div class="d-flex flex-column justify-content-center align-items-center" id="div-video-feed" style="width: 640px;height: 480px;margin: 						10px;min-height: 480px;min-width: 640px; border-radius: 10px;border: 4px dashed rgb(7, 245, 253);">
	    <video id="webcam" autoplay playsinline style="width: 100%;height: 100%;border-radius: 10px;
                  color: rgb(255,255,255);text-align: center;font-size: 22px;">
   		Camera Access Not Provided!
	    </video>
        
	</div>

            
        </div>
        <div id="prediction-text" 
     style="color: white; font-size: 24px; margin-top: 15px; 
            font-weight: bold; display: flex; justify-self: center; font-family: Arial;">
    Waiting for prediction...
</div>
        
        <div class="d-flex flex-column justify-content-center align-items-center" style="margin-bottom: 10px;"><button
                class="btn btn-info" type="button" data-bs-target="#modal-1" data-bs-toggle="modal">Quick Reference
                -<strong> ASL Alphabets</strong></button></div>
    </section>
    <section>
        <div class="container">
            <div class="accordion text-white" role="tablist" id="accordion-1">
                <div class="accordion-item" style="background: rgb(33,37,41);">
                    <h2 class="accordion-header" role="tab"><button class="accordion-button" data-bs-toggle="collapse"
                            data-bs-target="#accordion-1 .item-1" aria-expanded="true"
                            aria-controls="accordion-1 .item-1"
                            style="background: rgba(77, 2, 43, 0.185);color: rgb(255,255,255);">About The Project</button></h2>
                    <div class="accordion-collapse collapse show item-1" role="tabpanel" data-bs-parent="#accordion-1">
                        <div class="accordion-body">
                            <p class="mb-0">Artificial Intelligence has made it possible to handle our daily activities
                                in new and simpler ways. With the ability to automate tasks that normally require human
                                intelligence, such as speech and voice recognition, visual perception, predictive text
                                functionality, decision-making, and a variety of other tasks, AI can assist people with
                                disabilities by significantly improving their ability to get around and participate in
                                daily activities.<br><br>Currently, Sign Recognition is available <strong>only for
                                    alphabets A-I</strong> and not for J-Z, since J-Z alphabets also require Gesture
                                Recognition for them to be able to be predicted correctly to a certain degree of
                                accuracy.</p>
                        </div>
                    </div>
                </div>
                <div class="accordion-item" style="background: rgb(33,37,41);">
                    <h2 class="accordion-header" role="tab"><button class="accordion-button collapsed"
                            data-bs-toggle="collapse" data-bs-target="#accordion-1 .item-2" aria-expanded="false"
                            aria-controls="accordion-1 .item-2"
                            style="background: rgb(48, 39, 46);color: rgb(231,241,255);">Developed By</button></h2>
                    <div class="accordion-collapse collapse item-2" role="tabpanel" data-bs-parent="#accordion-1">
                        <div class="accordion-body">
                            <p class="mb-0">Students at Panimalar Engineering College during IBM project nalaiyathiran
                                Program.<br><br>1. <strong>MANIKANDAN S</strong> 2019PECIT286 <br>2.
                                <strong>JAYACHANDIRAN M</strong> 2019PECIT275<br>3. <strong>GUNASEELAN MSV</strong> 2019PECIT263<br>4. <strong>HARSHAN J</strong> 2019PECIT269
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="modal fade" role="dialog" tabindex="-1" id="modal-1">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">American Sign Language - Alphabets</h4><button type="button"
                        class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <img src="{{ url_for('static', filename='img/ASL.png') }}">
                </div>
                <div class="modal-footer"><button class="btn btn-secondary" type="button"
                        data-bs-dismiss="modal">Close</button></div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
<script>
    const video = document.getElementById("webcam");
    const canvas = document.createElement("canvas");
    const context = canvas.getContext("2d");
    const predictionText = document.getElementById("prediction-text");

    navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
            video.srcObject = stream;
    
            // start only after video is ready
            video.addEventListener("loadedmetadata", () => {
                setInterval(() => {
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    context.drawImage(video, 0, 0, canvas.width, canvas.height);
    
                    const frameData = canvas.toDataURL("image/jpeg");
    
                    fetch("/upload_frame", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ image: frameData })
                    })
                    .then(res => res.json())
                    .then(data => {
                        predictionText.textContent = "Prediction value :" + data.prediction;
                        console.log("Prediction:", data.prediction);
                    })
                    .catch(err => console.error("Upload failed:", err));
                }, 500);
            });
        })
        .catch(err => {
            alert("Camera access not provided! " + err);
        });
    </script>

</body>

</html>
